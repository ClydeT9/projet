<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    <div class="page-header">
        <h1 class="page-title">
            Mon profil
        </h1>
    </div>
    <div class="row">
        <div class="col-lg-3">
            <div class="card card-profile">
                <div class="card-header" style=""></div>
                <div class="card-body text-center">
                    <%= image_tag avatar_url(@user), class:"card-profile-img" %>
                    <h3 class="mb-3"><%= current_user.name %> <%= current_user.fullname %></h3>
                    <p class="mb-4"><%= current_user.job %>
                    <hr>
                    </p>
                    <button class="bg-blue text-xs hover:bg-blue-dark text-white py-2 px-4 rounded-full">
                      Voir le profil
                    </button>
                </div>
            </div>
        </div>
        <div class="col-lg-9">
            <form class="card">
                <div class="card-body1">
                    <div class="card-body">
                        <h3 class="card-title">Modifier mon profil</h3>
                        <div class="row">
                            <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                    <%= f.label :name,class:"form-label" %>
                                    <%= f.text_field :name, required: true,autocomplete: "name",class:"form-control", placeholder:"Prénom" %>
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                    <%= f.label :fullname,class:"form-label" %>
                                    <%= f.text_field :fullname, required: true,autocomplete: "fullname",class:"form-control", placeholder:"Nom" %>
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                    <%= f.label :email,class:"form-label" %>
                                    <%= f.email_field :email, required: true,autocomplete: "email",class:"form-control", placeholder:"Adresse e-mail" %>
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                    <%= f.label :job,class:"form-label" %>
                                    <%= f.text_field :job, autocomplete: "job",class:"form-control", placeholder:"Votre métier" %>
                                </div>
                            </div>
                              <p>
                            <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                <label class="form-label">Votre avatar</label>
                                    <div class="cadreavatar user">
                                    <%= image_tag avatar_url(@user),id:"image" %>
                                    
                                    </div>
                                  <label class="bg-grey-light hover:bg-grey cursor-pointer text-grey-darkest font-bold py-2 px-4 rounded inline-flex items-center">
                                    <i class="fas fa-download"></i> <span class="telechargement">Choisir une image</span>
                                    <span style="display:none;">
                                      <%= f.file_field :avatar, id:"files" %>
                                    </span>
                                        <label>
                                </div>
                            </div>



                          <% if current_user.role_editor? %>                  <div class="col-sm-6 col-md-6">
                                <div class="form-group">
                                    <%= f.label :telephone,class:"form-label" %>
                                    <%= f.text_field :telephone, required: true,autocomplete: "telephone",class:"form-control", placeholder:"Numéro de téléphone" %>
                                </div>
                                <div class="form-group">
                                    <%= f.label :entreprise,class:"form-label" %>
                                    <%= f.text_field :entreprise, required: true,autocomplete: "entreprise",class:"form-control", placeholder:"Entreprise" %>
                                </div>
                                <div class="form-group">
                                    <%= f.label :website,class:"form-label" %>
                                    <%= f.text_field :website, required: true,autocomplete: "website",class:"form-control", placeholder:"Site internet" %>
                                </div>
                            </div>
                        <% end %>





                        </div>
                    </div>

                </div>
                <div class="card-footer text-right">
                    <%= f.button "Modifier",class:"btn btn-primary",data:{disable_with: "<i class='fas fa-spinner fa-spin'></i> Modifier"} %>
                </div>
            </form>
        </div>
    </div>
<% end %>



<script>
document.getElementById("files").onchange = function () {
    var reader = new FileReader();

    reader.onload = function (e) {
        // get loaded data and render thumbnail.
        document.getElementById("image").src = e.target.result;
    };

    // read the image file as a data URL.
    reader.readAsDataURL(this.files[0]);
};
</script>